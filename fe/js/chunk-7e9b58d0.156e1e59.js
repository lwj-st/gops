(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9b58d0"],{"20ed":function(e,t,r){},"2d4b":function(e,t,r){e.exports=r.p+"img/ztth.557951b0.png"},3391:function(e,t,r){"use strict";r("b6db")},"7ed4":function(e,t,r){"use strict";var a=r("bb42"),n=new a["default"];t["a"]=n},a79a:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("el-container",{staticStyle:{height:"500px",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("treeForProduct",{ref:"tree",attrs:{nodeData:e.cNode,nodeId:e.cNodeId},on:{setAssetCount:e.setAssetCountHandler,setNodeCategory:e.setNodeCategoryHandler,setNodeAssets:e.setAssetHandle,breadcrumb:e.getBreadCrumbs}})],1),t("el-container",[t("el-header",{staticStyle:{"text-align":"right","font-size":"10px"}},[t("el-row",{attrs:{gutter:24}},[t("el-col",{staticStyle:{"text-align":"right","font-size":"12px","margin-top":"10px"},attrs:{span:2}},[e._v("当前节点:")]),t("el-col",{staticStyle:{height:"60px"},attrs:{span:11}},[t("el-breadcrumb",{staticStyle:{"margin-top":"33px","font-size":"10px"},attrs:{separator:"/"}},e._l(e.breadcrumbs,(function(r){return t("el-breadcrumb-item",{key:r.title},[e._v(e._s(r.title))])})),1)],1),t("el-col",{attrs:{span:10}})],1)],1),t("el-divider"),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{data:e.assets,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"instance_name",label:"实例名称",align:"center"}}),t("el-table-column",{attrs:{prop:"ip",label:"实例IP",align:"center"}}),t("el-table-column",{attrs:{prop:"instance_id",label:"实例标识",align:"center"}})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.cur_page,"page-size":e.page_size,layout:"total, prev, pager, next",total:e.assetCounts},on:{"current-change":e.assetPageHandler,"update:currentPage":function(t){e.cur_page=t},"update:current-page":function(t){e.cur_page=t}}})],1)],1)],1)},n=[],s=(r("ac67"),r("1bc7"),r("32ea"),r("e186"),r("bff1")),i=r("a483"),o=r("7736"),l=(r("a450"),function(){var e=this,t=e._self._c;return t("el-scrollbar",{staticStyle:{width:"100%",height:"100%"},attrs:{"view-style":"height:800px;"}},[t("el-tree",{ref:"SlotMenuList",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","filter-node-method":e.filterNode,"default-expanded-keys":[e.currentNodeId],"default-checked-keys":[e.currentNodeId],"current-node-key":e.currentNodeId,"highlight-current":"",accordion:""},on:{"node-click":e.fetchNodeAssets,"node-contextmenu":e.rihgtClick}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}]},[t("el-menu",{staticClass:"el-menu-vertical",attrs:{id:"rightClickMenu","active-text-color":"#fff","text-color":"#fff"},on:{select:e.handleRightSelect}},[t("el-menu-item",{staticClass:"menuItem",attrs:{index:"1"}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("添加节点")])]),t("el-menu-item",{staticClass:"menuItem",attrs:{index:"2"}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("编辑查看")])]),t("el-menu-item",{staticClass:"menuItem",attrs:{index:"3"}},[t("span",{attrs:{slot:"title"},slot:"title"},[e._v("删除节点")])])],1)],1),t("el-dialog",{attrs:{title:"新增节点",visible:e.addNodeVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addNodeVisible=t}}},[t("el-divider"),t("el-form",{ref:"nodeObj",staticStyle:{width:"80%"},attrs:{model:e.nodeObj,rules:e.formRules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"节点名称",required:""}},[t("el-input",{attrs:{placeholder:"英文小写字母,不超过20个字符!"},on:{change:e.checkName},model:{value:e.nodeObj.name,callback:function(t){e.$set(e.nodeObj,"name","string"===typeof t?t.trim():t)},expression:"nodeObj.name"}})],1),t("el-form-item",{attrs:{label:"节点别名",prop:"cname",required:""}},[t("el-input",{model:{value:e.nodeObj.cname,callback:function(t){e.$set(e.nodeObj,"cname","string"===typeof t?t.trim():t)},expression:"nodeObj.cname"}})],1),t("el-form-item",{attrs:{label:"节点类型",prop:"category",required:""}},[t("el-select",{attrs:{disabled:e.categoryDisabled,"value-key":"value",filterable:"",placeholder:"节点类型"},model:{value:e.nodeObj.category,callback:function(t){e.$set(e.nodeObj,"category",t)},expression:"nodeObj.category"}},e._l(e.categorys,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1),t("div",[t("span",{staticStyle:{"font-size":"4px"}},[e._v("服务: 代表产品线下子模块,不允许创建子节点   应用: 第三方应用(mysql\\redis\\mq等第三方应用)允许创建子节点")])])],1),"pdl"!=e.nodeObj.category?t("el-form-item",{attrs:{label:"日志集群"}},[t("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:"日志收集集群"},model:{value:e.nodeObj.log_id,callback:function(t){e.$set(e.nodeObj,"log_id",t)},expression:"nodeObj.log_id"}},e._l(e.logClusters,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"运维负责人",prop:"opsers"}},[t("el-select",{attrs:{"value-key":"username",multiple:"",filterable:"",clearable:"",placeholder:"请选节点负责人"},model:{value:e.nodeObj.opsers,callback:function(t){e.$set(e.nodeObj,"opsers",t)},expression:"nodeObj.opsers"}},e._l(e.users,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.username}})})),1)],1),t("el-form-item",{attrs:{label:"开发负责人",prop:"devers"}},[t("el-select",{attrs:{"value-key":"username",multiple:"",filterable:"",clearable:"",placeholder:"请选节点负责人"},model:{value:e.nodeObj.devers,callback:function(t){e.$set(e.nodeObj,"devers",t)},expression:"nodeObj.devers"}},e._l(e.users,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.username}})})),1)],1),"pdl"===this.nodeObj.category?t("el-form-item",{attrs:{label:"创建K8s命名空间"}},[0===this.clusterEnvs.length?t("span",[e._v("未获取到集群信息,如果同步创建kubernetes命名空间,请到集群管理创建集群!")]):t("el-checkbox-group",{model:{value:e.nodeObj.namespaces,callback:function(t){e.$set(e.nodeObj,"namespaces",t)},expression:"nodeObj.namespaces"}},e._l(this.clusterEnvs,(function(r){return t("el-checkbox",{key:r.id,attrs:{label:r.name}},[e._v(e._s(r.name))])})),1),t("span",[t("el-tooltip",{staticClass:"item",staticStyle:{"margin-left":"2px"},attrs:{effect:"light",content:"是否同步创建对应集群环境的命名空间,创建的对应kubernetes命名空间名称为: 节点名称-环境 例如:deploy-dev",placement:"right"}},[t("i",{staticClass:"el-icon-question"})])],1)],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addNodeVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createNode("nodeObj")}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"编辑节点",visible:e.editNodeVisible,width:"28%","close-on-click-modal":!1},on:{"update:visible":function(t){e.editNodeVisible=t}}},[t("el-divider"),t("el-form",{ref:"nodeObj",staticStyle:{width:"80%"},attrs:{model:e.nodeObj,rules:e.formRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"节点名称"}},[t("el-input",{attrs:{placeholder:"英文小写字母,不超过20个字符!"},model:{value:e.nodeObj.name,callback:function(t){e.$set(e.nodeObj,"name","string"===typeof t?t.trim():t)},expression:"nodeObj.name"}})],1),t("el-form-item",{attrs:{label:"节点别名",prop:"cname"}},[t("el-input",{attrs:{placeholder:"节点中文名,用于树菜单名称显示"},model:{value:e.nodeObj.cname,callback:function(t){e.$set(e.nodeObj,"cname","string"===typeof t?t.trim():t)},expression:"nodeObj.cname"}})],1),t("el-form-item",{attrs:{label:"节点类型",prop:"category",required:""}},[t("el-select",{attrs:{disabled:e.categoryDisabled,"value-key":"value",filterable:"",placeholder:"节点类型"},model:{value:e.nodeObj.category,callback:function(t){e.$set(e.nodeObj,"category",t)},expression:"nodeObj.category"}},e._l(e.categorys,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),"pdl"!=e.nodeObj.category?t("el-form-item",{attrs:{label:"日志集群"}},[t("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:"日志收集集群"},model:{value:e.nodeObj.log_id,callback:function(t){e.$set(e.nodeObj,"log_id",t)},expression:"nodeObj.log_id"}},e._l(e.logClusters,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"运维负责人",prop:"opsers"}},[t("el-select",{attrs:{"value-key":"username",multiple:"",filterable:"",clearable:"",placeholder:"请选节点负责人"},model:{value:e.nodeObj.opsers,callback:function(t){e.$set(e.nodeObj,"opsers",t)},expression:"nodeObj.opsers"}},e._l(e.users,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.username}})})),1)],1),t("el-form-item",{attrs:{label:"开发负责人",prop:"devers"}},[t("el-select",{attrs:{"value-key":"username",multiple:"",filterable:"",clearable:"",placeholder:"请选节点负责人"},model:{value:e.nodeObj.devers,callback:function(t){e.$set(e.nodeObj,"devers",t)},expression:"nodeObj.devers"}},e._l(e.users,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.username}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editNodeVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createNode("nodeObj")}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.delNodeVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delNodeVisible=t}}},[t("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.delNodeVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.delNode}},[e._v("确 定")])],1)])],1)}),c=[];r("0c84"),r("2843"),r("3269");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={props:{nodeId:"",nodeData:void 0},data:function(){return{treeData:void 0,categoryDisabled:!1,menuVisible:!1,addNodeVisible:!1,delNodeVisible:!1,editNodeVisible:!1,currentNodeId:1,filterText:"",loading:!1,defaultProps:{children:"children",label:"title"},clusterEnvs:[],currentNodes:[],logClusters:[],node_id:0,breadcrumb:void 0,currentNode:void 0,currentValue:void 0,users:void 0,cur_page:1,page_size:20,nodeObj:{id:0,name:"",cname:"",detail_id:0,pid:0,category:"pdl",log_id:[],devers:[],opsers:[],namespaces:[]},categorys:[{id:1,value:"service",label:"服务"},{id:2,value:"app",label:"应用"},{id:3,value:"pdl",label:"产品线"}],locations:[{id:1,value:"alibj",label:"阿里云ecs"},{id:2,value:"bjxsq",label:"北京西三旗"}],formRules:{name:[{required:!0,message:"产品线名称不能为空",trigger:"blur"}],cname:[{required:!0,message:"别名不能为空",trigger:"blur"}],opsers:[{required:!0,message:"请输入产品线运维负责人",trigger:"blur"}],devers:[{required:!0,message:"请输入产品线开发负责人",trigger:"blur"}]}}},created:function(){this.initData()},watch:{filterText:function(e){this.$refs.SlotMenuList.filter(e)},"$route.query":{handler:function(){this.$route.query&&(void 0!=this.$route.query.node_id?(this.node_id=parseInt(this.$route.query.node_id),this.getNodeTaskHandler(this.node_id),this.initTree()):this.initData())},immediate:!0}},methods:d(d({},Object(o["b"])(["getTreeMenus","createTreeNode","deleteTreeNode","getNodeAssets","getClusters","getAccounts","getLogClusterSetting"])),{},{initTree:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentNodeId=this.nodeId,this.loading=!0,e.prev=2,e.next=5,this.getTreeMenus();case 5:t=JSON.parse(this.$store.state.treeMenus.data),this.treeData=t,this.$emit("breadcrumb",JSON.parse(this.nodeData));case 8:return e.prev=8,this.loading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,this,[[2,,8,11]])})));function t(){return e.apply(this,arguments)}return t}(),initData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getTreeMenus();case 2:return t=JSON.parse(this.$store.state.treeMenus.data),this.treeData=t,e.next=6,this.getClusters({page:this.cur_page,pageSize:20});case 6:return this.clusterEnvs=this.$store.state.clusterData.data,e.next=9,this.getAccounts({page:this.cur_page,pageSize:1e3});case 9:return this.users=this.$store.state.userData.data,this.currentNodes.length>0&&this.$emit("breadcrumb",this.currentNodes),e.next=13,this.getLogClusterSetting();case 13:r=this.$store.state.logSetting.data,"{}"!=JSON.stringify(r)&&(this.logClusters=r);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkName:function(e){var t=new RegExp("[\\u4E00-\\u9FFF]+","g");if(t.test(e))return this.$message.error("节点名称不允许包含中文!"),!1},getNodeAssetsHandler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getNodeAssets({nodeId:t,page:this.cur_page,pageSize:this.page_size});case 2:console.log(">>>>",this.$store.state.nodeAssetData.data),this.$emit("setNodeAssets",this.$store.state.nodeAssetData.data),this.$emit("setAssetCount",this.$store.state.nodeAssetData.total);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),createNodeAction:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createTreeNode(this.nodeObj);case 2:this.addNodeVisible=!1,this.editNodeVisible=!1,this.initTree();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createNode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate((function(e){e&&("edit"==t?r.$confirm("修改产品线名称会影响部署，请确认镜像仓库项目已存在, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.createNodeAction()})).catch((function(){})):r.createNodeAction())})),this.addNodeVisible=!1,this.editNodeVisible=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),delNodeAction:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteTreeNode({id:this.currentNode.id});case 2:this.initTree();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delNode:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("关联docker镜像仓库、日志索引, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.delNodeAction(),children.splice(index,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){})),this.delNodeVisible=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),filterNode:function(){},findIndexArray:function(e,t,r){for(var a=Array.from(r),n=0,s=e.length;n<s;n++){if(a.push(e[n]),e[n].data.id===t)return a;var i=e[n].children;if(i&&i.length){var o=this.findIndexArray(i,t,a);if(o)return o}a.pop()}},fetchNodeAssets:function(e){this.node_id=e.data.id;var t=this.findIndexArray(this.treeData,e.data.id,e.data);this.currentNodes=t,this.$emit("breadcrumb",t),this.$emit("setNodeCategory",e.data.category),this.getNodeAssetsHandler(this.node_id)},rihgtClick:function(e,t,r,a){var n=this;this.nodeObj.pid=t.data.id,this.menuVisible=!0,this.currentNode=t,this.currentValue=r,document.addEventListener("click",(function(e){n.menuVisible=!1}));var s=document.querySelector("#rightClickMenu");s.style.position="fixed",s.style.left=e.clientX+30+"px",s.style.top=e.clientY+"px",s.style.width="130px"},handleRightSelect:function(e){if(1==e){if("root"===this.currentNode.data.category&&(console.log("root"),this.categorys=[{id:3,value:"pdl",label:"产品线"}],this.nodeObj.category="pdl",this.categoryDisabled=!0),"pdl"===this.currentNode.data.category&&(this.categoryDisabled=!1,this.nodeObj.category="",this.categorys=[{id:1,value:"service",label:"服务"},{id:2,value:"app",label:"应用"}]),"service"===this.currentNode.data.category&&(this.categorys=[{id:1,value:"service",label:"服务"},{id:2,value:"app",label:"应用"}]),"app"===this.currentNode.data.category&&(this.categoryDisabled=!1,this.categorys=[{id:2,value:"app",label:"应用"}]),"service"===this.currentNode.data.category)return this.$message.error("服务节点下不允许创建子节点!"),!1;this.nodeObj.id=0,this.nodeObj.name="",this.nodeObj.cname="",this.nodeObj.opsers=[],this.nodeObj.devers=[],this.addNodeVisible=!0}else 2==e?("root"===this.currentNode.data.category&&(console.log("root"),this.categorys=[{id:1,value:"pdl",label:"产品线"}],this.nodeObj.category="pdl",this.categoryDisabled=!0),"pdl"===this.currentNode.data.category&&(this.categoryDisabled=!1,this.nodeObj.category="",this.categorys=[{id:1,value:"pdl",label:"产品线"}]),"service"===this.currentNode.data.category&&(this.categoryDisabled=!1,this.nodeObj.category="",this.categorys=[{id:1,value:"service",label:"服务"},{id:2,value:"app",label:"应用"}]),"app"===this.currentNode.data.category&&(this.categoryDisabled=!1,this.categorys=[{id:1,value:"service",label:"服务"},{id:2,value:"app",label:"应用"}]),this.nodeObj.id=this.currentNode.data.id,this.nodeObj.name=this.currentNode.data.name,this.nodeObj.cname=this.currentNode.data.cname,this.nodeObj.category=this.currentNode.data.category,this.nodeObj.pid=this.currentNode.data.pid,this.nodeObj.detail_id=this.currentNode.data.detail_id,this.nodeObj.opsers=this.currentNode.data.opsers,this.nodeObj.devers=this.currentNode.data.devers,this.nodeObj.log_id=this.currentNode.data.log_id,this.editNodeVisible=!0):3==e?this.delNodeVisible=!0:4==e&&console.log("4")}})},h=p,b=(r("b569"),r("0b56")),m=Object(b["a"])(h,l,c,!1,null,"41e8d2e0",null),f=m.exports,g=r("cff1");r("a18c");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={components:{treeForProduct:f,zHeader:g["a"]},data:function(){return{treeData:void 0,loading:!1,cur_page:1,assetCount:0,breadcrumbs:void 0,page_size:10,assets:[],assetCounts:0,timer:"",defaultProps:{children:"children",label:"came"}}},watch:{"$route.query":{handler:function(){this.$route.query&&0!=this.$route.query.node_id&&(this.cNodeId=this.$route.query.node_id,this.cNode=this.$route.query.node_data)},immediate:!0}},created:function(){},beforeDestroy:function(){clearInterval(this.timer)},computed:{pData:function(){return{tasks:[]}}},methods:y(y({},Object(o["b"])(["getNodeTasks","getCommitLogsOrTags","build","getBuildLogs","getYaml","getImages","deploy","deleteTask"])),{},{getBreadCrumbs:function(e){this.breadcrumbs=e},setAssetHandle:function(e){this.assets=e},setAssetCountHandler:function(e){this.assetCount=e},setNodeCategoryHandler:function(e){this.category=e},assetPageHandler:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getNodeAssets({nodeId:nodeId,page:this.cur_page,pageSize:this.page_size});case 2:this.assets=this.$store.state.nodeAssetData.data,this.assetCount=this.$store.state.nodeAssetData.total;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),commandHandler:function(e){"createTask"===e&&this.createTask(),"complieTools"===e&&this.$router.push({path:"/tool"}),"deployCluster"===e&&this.$router.push({path:"/cluster"})},taskEdit:function(e,t){if(0==this.$refs.tree.node_id)return this.$message.error("请到对应产品线下操作!"),!1;this.$store.state.taskForm=t,this.$router.push({path:"/task?oper=edit&node_data="+JSON.stringify(this.breadcrumbs)})},taskCopy:function(e,t){},taskDelete:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteTask({id:r.id});case 2:return e.next=4,this.getNodeTasks({nodeId:this.$refs.tree.node_id,page:this.cur_page,pageSize:this.page_size});case 4:this.tasks=this.$store.state.taskData.data,this.taskCount=this.$store.state.taskData.total;case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()})},j=O,w=(r("3391"),Object(b["a"])(j,a,n,!1,null,null,null));t["default"]=w.exports},b569:function(e,t,r){"use strict";r("20ed")},b6db:function(e,t,r){},cff1:function(e,t,r){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[t("i",{staticClass:"el-icon-menu"})]),t("div",{staticClass:"logo"},[e._v("天鸿云效")]),t("div",{staticClass:"header-right"},[t("div",{staticClass:"header-user-con"},[t("div",{on:{click:e.handleMail}},[t("el-badge",{staticClass:"item",attrs:{value:e.mailCount}},[t("i",{staticClass:"el-icon-message"})])],1),t("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[t("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.username)+" "),t("i",{staticClass:"el-icon-caret-bottom"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[""!=e.username?t("el-dropdown-item",{attrs:{divided:"",command:"loginout"}},[e._v("退出登录")]):e._e()],1)],1),e._m(0)],1)]),t("el-drawer",{attrs:{title:"消息",visible:e.drawer,direction:e.direction,size:"38%"},on:{"update:visible":function(t){e.drawer=t}}},[0!=e.mailData.length?t("el-table",{attrs:{data:e.mailData}},[t("el-table-column",{attrs:{property:"title",label:"消息标题",width:"150"}}),t("el-table-column",{attrs:{property:"sender",label:"发送人",width:"80"}}),t("el-table-column",{attrs:{label:"消息内容"},scopedSlots:e._u([{key:"default",fn:function(r){return[!0===r.row.update?t("a",{attrs:{href:r.row.content,target:"_blank"}},[e._v("查看版本更新")]):t("span",[e._v(e._s(r.row.content))])]}}],null,!1,3985084751)}),t("el-table-column",{attrs:{property:"date",label:"时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatTime")(t.row.date))+"\n      ")]}}],null,!1,421593158)})],1):0===e.mailData.length?t("div",[e._v("暂无新消息")]):e._e()],1)],1)},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-avator"},[t("img",{attrs:{src:r("2d4b")}})])}],s=(r("ac67"),r("1bc7"),r("32ea"),r("e186"),r("bff1")),i=r("a483"),o=r("7ed4"),l=r("7736");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={data:function(){return{timer:"",mailCount:void 0,direction:"rtl",drawer:!1,collapse:!1,fullscreen:!1,name:"guest",message:2,makeworkVisible:!1,mailData:[]}},computed:{username:function(){var e=this.$store.state.username;return e}},created:function(){this.getData(),this.fetchLoingUsername()},methods:u(u({},Object(l["b"])(["getLoginUser","logout","searchOwnMessage","updateIsRead"])),{},{login:function(){this.$router.push({name:"login"})},searchMessage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.searchOwnMessage();case 2:this.mailData=this.$store.state.messages.data,t=this.$store.state.messages.count,this.mailCount=0!=t?t:"";case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.searchMessage(),this.timer=setInterval(this.searchMessage,6e4);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clearTimer:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,clearInterval(this.timer);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){clearInterval(this.timer)},fetchLoingUsername:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLoginUser();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleCommand:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("loginout"!=t){e.next=5;break}return e.next=3,this.logout();case 3:localStorage.removeItem(this.username),this.$router.push("/login");case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),collapseChage:function(){this.collapse=!this.collapse,o["a"].$emit("collapse",this.collapse)},work:function(){console.log("aaaaa")},handleMail:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateIsRead();case 2:this.drawer=!0,this.searchMessage();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen}}),mounted:function(){document.body.clientWidth<1500&&this.collapseChage()}},p=d,h=(r("f4c7"),r("0b56")),b=Object(h["a"])(p,a,n,!1,null,"7b203a65",null);t["a"]=b.exports},e015:function(e,t,r){},f4c7:function(e,t,r){"use strict";r("e015")}}]);