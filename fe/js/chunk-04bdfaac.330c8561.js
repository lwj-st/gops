(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04bdfaac"],{6146:function(e,t,r){},e77f7:function(e,t,r){"use strict";r.r(t);r("a450");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-dialog",{attrs:{title:"部署环境管理",visible:e.clusterVisable,width:"60%"},on:{"update:visible":function(t){e.clusterVisable=t},close:function(t){e.clusterVisable=!1}}},[t("el-divider"),t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"clusterConfig",attrs:{model:e.clusterConfig,rules:e.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"name",label:"集群环境"}},[t("el-select",{attrs:{"value-key":"value",filterable:"",clearable:"",placeholder:"请选择部署环境"},model:{value:e.clusterConfig.name,callback:function(t){e.$set(e.clusterConfig,"name",t)},expression:"clusterConfig.name"}},e._l(e.envs,(function(e){return t("el-option",{key:e.id,attrs:{label:e.cname,value:e.name}})})),1)],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"path",label:"认证文件"}},[t("el-input",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{placeholder:"填写kubeconfig文件路径"},model:{value:e.clusterConfig.path,callback:function(t){e.$set(e.clusterConfig,"path",t)},expression:"clusterConfig.path"}})],1),t("el-form-item",{staticStyle:{width:"80%"},attrs:{prop:"mark",label:"说明"}},[t("el-input",{staticStyle:{width:"300px","margin-right":"5px"},model:{value:e.clusterConfig.mark,callback:function(t){e.$set(e.clusterConfig,"mark",t)},expression:"clusterConfig.mark"}})],1)],1),t("div",[t("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.create("clusterConfig")}}},[e._v("创建")]),t("el-button",{on:{click:function(t){e.clusterVisable=!1}}},[e._v("取 消")])],1)],1),t("div",[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.createClusterHandler}},[e._v("创建")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-top":"10px"},attrs:{data:e.clusterData,"header-cell-style":{background:"#eef1f6",color:"#606266"}}},[t("el-table-column",{attrs:{prop:"name",label:"集群",align:"center"}}),t("el-table-column",{attrs:{prop:"path",label:"认证文件",align:"center"}}),t("el-table-column",{attrs:{prop:"mark",label:"备注",align:"center"}}),t("el-table-column",{attrs:{prop:"created_at",label:"创建时间",sortable:"",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("formatTime")(t.row.created_at))+"\n          ")]}}])}),t("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-caret-right"},on:{click:function(t){return e.testConnectHandler(r.$index,r.row)}}},[e._v("测试K8s连接")]),t("el-button",{staticClass:"green",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.editClusterHandler(r.$index,r.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.delClusterHandler(r.$index,r.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.cur_page,"page-size":e.page_size,layout:"total, prev, pager, next",total:e.clusterCounts},on:{"current-change":e.clusterPageHandler,"update:currentPage":function(t){e.cur_page=t},"update:current-page":function(t){e.cur_page=t}}})],1)],1)],1)],1)},a=[],i=(r("ac67"),r("1bc7"),r("32ea"),r("e186"),r("bff1")),s=r("a483"),c=r("7736");r("9907"),r("7b04");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o={data:function(){return{envs:[{id:1,name:"dev",cname:"开发环境"},{id:2,name:"test",cname:"测试环境"},{id:3,name:"prod",cname:"生产环境"}],loading:!0,clusterData:[],clusterConfig:{id:0,name:"",path:"",mark:""},clusterVisable:!1,cur_page:1,page_size:20,page_total:1,idx:-1,name:"",clusterCounts:0,rules:{name:[{required:!0,message:"选择集群环境",trigger:"blur"}],path:[{required:!0,message:"请输入认证kubeconfig文件路径",trigger:"blur"}]}}},created:function(){this.getData()},watch:{},computed:{data:function(){return{}}},methods:u(u({},Object(c["b"])(["createCluster","deleteCluster","getClusters","testConnect"])),{},{getData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.getClusters({page:this.cur_page,pageSize:20});case 4:this.clusterData=this.$store.state.clusterData.data,this.clusterCounts=this.$store.state.clusterData.total;case 6:return e.prev=6,this.loading=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,this,[[1,,6,9]])})));function t(){return e.apply(this,arguments)}return t}(),createClusterHandler:function(){this.clusterConfig.id=0,this.clusterConfig.name="",this.clusterConfig.path="",this.clusterVisable=!0},createHandler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createCluster(this.clusterConfig);case 2:return e.next=4,this.getClusters({page:this.cur_page,pageSize:20});case 4:this.clusterData=this.$store.state.clusterData.data,this.clusterCounts=this.$store.state.clusterData.total;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),create:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate((function(e){if(!e)return!1;r.clusterVisable=!1,r.createHandler()}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),testConnectHandler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.testConnect(r);case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),editClusterHandler:function(e,t){this.clusterConfig.id=t.id,this.clusterConfig.name=t.name,this.clusterConfig.path=t.path,this.clusterVisable=!0},delClusterHandler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.deleteCluster({id:r.id});case 2:this.getData();case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),clusterPageHandler:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.cur_page=t,e.next=3,this.getClusters({page:this.cur_page,pageSize:this.page_size});case 3:this.clusterData=this.$store.state.clusterData.data,this.clusterCounts=this.$store.state.clusterData.total;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),global_search:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.globalSearch(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},p=o,g=(r("ead8"),r("0b56")),f=Object(g["a"])(p,n,a,!1,null,"7f48704a",null);t["default"]=f.exports},ead8:function(e,t,r){"use strict";r("6146")}}]);